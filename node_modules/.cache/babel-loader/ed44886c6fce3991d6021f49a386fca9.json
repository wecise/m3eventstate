{"remainingRequest":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/babel-loader/lib/index.js!/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/graph/searchbar/path/NewInputBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/graph/searchbar/path/NewInputBar.vue","mtime":1629786242255},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTmV3SW5wdXRCYXIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuZXdNb2RlbDogewogICAgICAgIGlkOiAiIiwKICAgICAgICB2YWx1ZTogIiIKICAgICAgfSwKICAgICAgZW50aXR5OiB7CiAgICAgICAgbGlzdDogW10sCiAgICAgICAgdGltZW91dDogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25OZXc6IGZ1bmN0aW9uIG9uTmV3KCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBpZCA9IHRoaXMubmV3TW9kZWwuaWQgJiYgdGhpcy5uZXdNb2RlbC5pZC50cmltKCk7CgogICAgICBpZiAoIWlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzZWxmLiRwYXJlbnQuJHBhcmVudC4kcGFyZW50LnRyYWNlLm5vZGVzLnB1c2goewogICAgICAgIGlkOiB0aGlzLm5ld01vZGVsLmlkLAogICAgICAgIGNlbGw6IHsKICAgICAgICAgIGVkZ2U6IGZhbHNlCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5uZXdNb2RlbC5pZCA9ICIiOwogICAgfSwKICAgIHF1ZXJ5U2VhcmNoQXN5bmM6IGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoQXN5bmModGVybSwgY2IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfLmlzRW1wdHkodGVybSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMubTMuY2FsbEZTKCIvbWF0cml4L2dyYXBoL2VudGl0eS1zZWFyY2gtYnktdGVybS5qcyIsIGVuY29kZVVSSUNvbXBvbmVudCh0ZXJtKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGVudGl0eXMgPSByZXMubWVzc2FnZTsKICAgICAgICB2YXIgcmVzdWx0cyA9IHRlcm0gPyBlbnRpdHlzLmZpbHRlcihfdGhpcy5jcmVhdGVTdGF0ZUZpbHRlcih0ZXJtKSkgOiBlbnRpdHlzOwogICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5lbnRpdHkudGltZW91dCk7CiAgICAgICAgX3RoaXMuZW50aXR5LnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNiKHJlc3VsdHMpOwogICAgICAgIH0sIDUwICogTWF0aC5yYW5kb20oKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZVN0YXRlRmlsdGVyOiBmdW5jdGlvbiBjcmVhdGVTdGF0ZUZpbHRlcih0ZXJtKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHsKICAgICAgICByZXR1cm4gc3RhdGUudmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRlcm0udG9Mb3dlckNhc2UoKSkgPT09IDA7CiAgICAgIH07CiAgICB9LAogICAgaGFuZGxlU2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVTZWxlY3QoaXRlbSkgewogICAgICB0aGlzLm9uTmV3KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["NewInputBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAkBA,OAAA,CAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA;AAFA,OADA;AAKA,MAAA,MAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,OAAA,EAAA;AAFA;AALA,KAAA;AAUA,GAbA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,UAAA,IAAA,GAAA,IAAA;AAEA,UAAA,EAAA,GAAA,KAAA,QAAA,CAAA,EAAA,IAAA,KAAA,QAAA,CAAA,EAAA,CAAA,IAAA,EAAA;;AACA,UAAA,CAAA,EAAA,EAAA;AACA;AACA;;AACA,MAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,OAAA,CAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,QAAA,EAAA,EAAA,KAAA,QAAA,CAAA,EADA;AAEA,QAAA,IAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA;AAFA,OAAA;AAIA,WAAA,QAAA,CAAA,EAAA,GAAA,EAAA;AAEA,KAdA;AAeA,IAAA,gBAfA,4BAeA,IAfA,EAeA,EAfA,EAeA;AAAA;;AAEA,UAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA;;AAEA,WAAA,EAAA,CAAA,MAAA,CAAA,wCAAA,EAAA,kBAAA,CAAA,IAAA,CAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,GAAA,GAAA,CAAA,OAAA;AACA,YAAA,OAAA,GAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA,KAAA,CAAA,iBAAA,CAAA,IAAA,CAAA,CAAA,GAAA,OAAA;AAEA,QAAA,YAAA,CAAA,KAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,OAAA,GAAA,UAAA,CAAA,YAAA;AACA,UAAA,EAAA,CAAA,OAAA,CAAA;AACA,SAFA,EAEA,KAAA,IAAA,CAAA,MAAA,EAFA,CAAA;AAGA,OARA;AASA,KA9BA;AA+BA,IAAA,iBA/BA,6BA+BA,IA/BA,EA+BA;AACA,aAAA,UAAA,KAAA,EAAA;AACA,eAAA,KAAA,CAAA,KAAA,CAAA,WAAA,GAAA,OAAA,CAAA,IAAA,CAAA,WAAA,EAAA,MAAA,CAAA;AACA,OAFA;AAGA,KAnCA;AAoCA,IAAA,YApCA,wBAoCA,IApCA,EAoCA;AACA,WAAA,KAAA;AACA;AAtCA;AAdA,CAAA","sourcesContent":["<template>\n    <el-autocomplete placeholder=\"请输入实体\" \n                    v-model=\"newModel.id\" \n                    class=\"input-with-select topological-analysis-input\"\n                    :fetch-suggestions=\"querySearchAsync\"\n                    :trigger-on-focus=\"false\"\n                    @select=\"handleSelect\"\n                    @keyup.enter.native=\"onNew\">\n        <template slot=\"prepend\">\n            <span class=\"el-icon-place\"></span>\n        </template>\n        <el-button slot=\"append\" @click=\"onNew\">\n            <span class=\"el-icon-circle-plus-outline\" style=\"font-size:16px;font-weight:600;color:green;\"></span>\n        </el-button>\n    </el-autocomplete>\n</template>\n\n<script>\nimport _ from 'lodash';\n\nexport default {\n    name: \"NewInputBar\",\n    data(){\n        return {\n            newModel: {\n                id: \"\",\n                value: \"\"\n            },\n            entity: {\n                list: [],\n                timeout:  null\n            }\n        }\n    },\n    methods:{\n        onNew(){\n            const self = this;\n            \n            let id = this.newModel.id && this.newModel.id.trim()\n            if (!id) {\n                return;\n            }\n            self.$parent.$parent.$parent.trace.nodes.push({\n                id: this.newModel.id,\n                cell: {edge:false}\n            })\n            this.newModel.id = \"\";\n            \n        },\n        querySearchAsync(term, cb) {\n            \n            if(_.isEmpty(term)){\n                return false;\n            }\n\n            this.m3.callFS(\"/matrix/graph/entity-search-by-term.js\",encodeURIComponent(term)).then(res=>{\n                let entitys = res.message;\n                let results = term ? entitys.filter(this.createStateFilter(term)) : entitys;\n            \n                clearTimeout(this.entity.timeout);\n                this.entity.timeout = setTimeout(() => {\n                    cb(results);\n                }, 50 * Math.random());\n            })\n        },\n        createStateFilter(term) {\n            return (state) => {\n                return (state.value.toLowerCase().indexOf(term.toLowerCase()) === 0);\n            };\n        },\n        handleSelect(item) {\n            this.onNew();\n        }\n    }\n}\n</script>"],"sourceRoot":"src/components/graph/searchbar/path"}]}