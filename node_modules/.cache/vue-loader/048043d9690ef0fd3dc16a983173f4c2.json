{"remainingRequest":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/layout/SideBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/layout/SideBar.vue","mtime":1630064312444},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7CgpleHBvcnQgZGVmYXVsdHsKICAgIG5hbWU6ICJTaWRlQmFyIiwKICAgIHByb3BzOiB7CiAgICAgICAgYXV0aDogT2JqZWN0LAogICAgICAgIGdsb2JhbDogT2JqZWN0CiAgICB9LAogICAgZGF0YSgpewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG1vZGVsOiBudWxsLAogICAgICAgICAgICBwcmVGaXhJY29uOiAnL3N0YXRpYy9hc3NldHMvaW1hZ2VzL2FwcHMvcG5nLycsCiAgICAgICAgICAgIHBvc3RGaXhJY29uOiAnJywKICAgICAgICAgICAgaXNDb2xsYXBzZTogdHJ1ZSwKICAgICAgICAgICAgZGVmYXVsdEFjdGl2ZTogJy9tYXRyaXgvaG9tZScsCiAgICAgICAgICAgIGFwcENvbmZpZzogW10sCiAgICAgICAgICAgIHNpZGVCYXJTdGF0dXM6IDIKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgfSwKICAgIG1vdW50ZWQoKXsKICAgICAgICB0aGlzLmRlZmF1bHRBY3RpdmUgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICB9LAogICAgZmlsdGVyczp7CiAgICAgICAgcGlja0ljb24oaWNvbil7CiAgICAgICAgICAgIHJldHVybiBgL3N0YXRpYy9hc3NldHMvaW1hZ2VzL2FwcHMvcG5nLyR7aWNvbn1gOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaW5pdCgpewogICAgICAgICAgICB0aGlzLm0zLmNhbGxGUygiL21hdHJpeC9tM3NlYXJjaC91c2VyLmpzIiwgdGhpcy5hdXRoLnVzZXJuYW1lKS50aGVuKCAodmFsKT0+ewogICAgICAgICAgICAgICAgbGV0IHJ0biA9IHZhbC5tZXNzYWdlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsID0gewogICAgICAgICAgICAgICAgICAgIGxpc3Q6IF8ubWFwKHJ0bi5hcHBMaXN0U2VsZWN0ZWQsKHYpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsZXQgX3BhZ2UgPSBfLmxhc3QobXguZ2V0UGFnZSgpLnNwbGl0KCIvIikpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKF8uZW5kc1dpdGgodi51cmwsX3BhZ2UpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5tZXJnZSh2LCB7c3RhdHVzOiAiYWN0aXZlIn0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAqLwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm1lcmdlKHYsIHtzdGF0dXM6ICIifSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBydG4udGVtcGxhdGUsCiAgICAgICAgICAgICAgICAgICAgYXBwTGlzdFVuR3JvdXBlZDogcnRuLmFwcExpc3RVbkdyb3VwZWQKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoKTsKICAgICAgICAgICAgfSApOwogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIHNldFN0YXR1cygpewogICAgICAgICAgICAvLyDmnInmqKHmnb/mg4XlhrUKICAgICAgICAgICAgaWYoIV8uaXNFbXB0eSh0aGlzLm1vZGVsLnRlbXBsYXRlKSl7CiAgICAgICAgICAgICAgICB0aGlzLnNpZGVCYXJTdGF0dXMgPSAwOwogICAgICAgICAgICB9IAogICAgICAgICAgICAvLyDmsqHmnInmqKHmnb/mg4XlhrUKICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIC8vIOiPnOWNlemhuei2hei/h+mYiOWAvAogICAgICAgICAgICAgICAgaWYodGhpcy5tb2RlbC5saXN0Lmxlbmd0aCA+IHRoaXMuZ2xvYmFsLnJlZ2lzdGVyLnNpZGViYXIubWVudUNvbGxhcHNlKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZGVCYXJTdGF0dXMgPSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8g6I+c5Y2V6aG55rKh5pyJ6LaF6L+H6ZiI5YC8CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZGVCYXJTdGF0dXMgPSAyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBpbml0V25kKCl7CgogICAgICAgICAgICAvKiBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMud25kID0gbWF4V2luZG93LndpbkFwcHMoYOW6lOeUqOW4guWcumAsIGA8ZGl2IGlkPSJuYXYtbWVudS1sZXZlbDEiIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlOyI+PC9kaXY+YCwgbnVsbCwgJ2FwcHMtY29udGFpbmVyJyk7CiAgICAgICAgICAgICAgICBpbnN0LmFwcCA9IG5ldyBWdWUoaW5zdC5hcHBCb3goKSkuJG1vdW50KCIjbmF2LW1lbnUtbGV2ZWwxIik7CiAgICAgICAgICAgIH0sIDUwKTsgKi8KCiAgICAgICAgfSwKICAgICAgICByZWZyZXNoKCl7CiAgICAgICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgIH0sCiAgICAgICAgb25Ub2dnbGUoKXsKICAgICAgICAgICAgdGhpcy5pc0NvbGxhcHNlID0gIXRoaXMuaXNDb2xsYXBzZTsKICAgICAgICB9LAogICAgICAgIG9uU2VsZWN0KGluZGV4LGluZGV4UGF0aCl7CiAgICAgICAgICAgIGlmKGluZGV4ID09ICd0b2dnbGUnKXsKICAgICAgICAgICAgICAgIHRoaXMub25Ub2dnbGUoKTsKICAgICAgICAgICAgfSBlbHNlIGlmKGluZGV4ID09ICdhcHBzJyl7CiAgICAgICAgICAgICAgICB0aGlzLmluaXRXbmQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGluZGV4LCdfcGFyZW50Jyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uQ2xpY2sodXJsKXsKICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsLCdfYmxhbmsnKQogICAgICAgIH0sCiAgICAgICAgb25PcGVuKGtleSwga2V5UGF0aCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhrZXksIGtleVBhdGgpOwogICAgICAgIH0sCiAgICAgICAgb25DbG9zZShrZXksIGtleVBhdGgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coa2V5LCBrZXlQYXRoKTsKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["SideBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SideBar.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\n    <el-menu :default-active=\"defaultActive\"\n            mode=\"vertical\"\n            @select=\"onSelect\"\n            @open=\"onOpen\" \n            @close=\"onClose\" \n            :collapse=\"isCollapse\"\n            :collapse-transition=\"false\"\n            class=\"el-menu-vertical-sidebar\"\n            text-color=\"#fff\"\n            active-text-color=\"#ffd04b\"\n            v-if=\"auth && model\">\n\n        <!-- <el-menu-item index=\"toggle\" style=\"display:\">\n            <i :class=\"isCollapse?'el-icon-s-unfold':'el-icon-s-fold'\" style=\"width:16px;color:#fff;\"></i>\n        </el-menu-item>\n\n        <el-menu-item index=\"apps\" v-if=\"auth.Company.name == 'wecise'\">\n            <img :src=\"preFixIcon+'app.png'+postFixIcon\" style=\"width:16px;\"></img> \n            <span style=\"padding-left:5px;\" slot=\"title\">应用</span>\n        </el-menu-item> -->\n        \n        <el-menu-item index=\"/\">\n            <img :src=\"preFixIcon+'home.png'+postFixIcon\" style=\"width:16px;\"></img>\n            <span style=\"padding-left:5px;\" slot=\"title\">首页</span>\n        </el-menu-item>\n        \n        <!-- 有模板情况-->\n        <el-submenu :index=\"item.name\" v-for=\"item in model.template\" :key=\"item.name\" v-show=\"sideBarStatus === 0\">\n            <template slot=\"title\">\n                <img :src=\"item.icon | pickIcon\" style=\"width:16px;\"></img>\n                <span style=\"padding-left:5px;font-size:12px;\">{{ item.title }}【{{item.groups.length}}】</span>\n            </template>\n            \n            <el-menu-item-group>\n                <span slot=\"title\" style=\"font-size:12px;\">{{ item.title }}【{{item.groups.length}}】</span>\n                <el-menu-item :class=\"subItem.status\" :index=\"subItem.url\" v-for=\"subItem in item.groups\"  :key=\"subItem.name\">\n                    <img :src=\"subItem.icon | pickIcon\" style=\"width:16px;\"></img>\n                    <span slot=\"title\">\n                        <span style=\"padding-left:5px;\" v-if=\"global.register.lanuage == 'zh_CN'\">{{subItem.cnname}}</span>\n                        <span style=\"padding-left:5px;\" v-else>{{subItem.enname}}</span>\n                        <el-tooltip content=\"在新窗口中打开\" placement=\"right-start\">\n                            <el-button type=\"text\" icon=\"el-icon-position\" @click.stop.prevent=\"onClick(subItem.url)\" style=\"float:right;transform:scale(0.6);color:#ffffff;\"></el-button>\n                        </el-tooltip>\n                    </span>\n                </el-menu-item>\n            </el-menu-item-group>\n        </el-submenu>\n\n        <!-- 没有模板情况，且菜单项数量超过阈值-->\n        <el-submenu index=\"appList\" v-show=\"sideBarStatus === 1\">\n            <template slot=\"title\">\n                <i class=\"fas fa-cubes\" style=\"color:#ffffff;font-size:18px;\"></i>\n                <span>应用</span>\n            </template>\n\n            <el-menu-item-group>\n                <span slot=\"title\">应用</span>\n                <el-menu-item :class=\"item.status\" :index=\"item.url\" v-for=\"item in model.list\" :key=\"item.name\">\n                    <img :src=\"item.icon | pickIcon\" style=\"width:16px;\"></img>\n                    <span slot=\"title\">\n                        <span style=\"padding-left:5px;\" v-if=\"global.register.lanuage == 'zh_CN'\">{{item.cnname}}</span>\n                        <span style=\"padding-left:5px;\" v-else>{{item.enname}}</span>\n                        <el-tooltip content=\"在新窗口中打开\" placement=\"right-start\">\n                            <el-button type=\"text\" icon=\"el-icon-position\" @click.stop.prevent=\"onClick(item.url)\" style=\"float:right;transform:scale(0.6);color:#ffffff;\"></el-button>\n                        </el-tooltip>\n                    </span>\n                </el-menu-item>\n            </el-menu-item-group>\n        </el-submenu>\n\n        <!-- 没有模板情况，且菜单项数量没超过阈值-->\n        <el-menu-item :class=\"item.status\" :index=\"item.url\" v-for=\"item in model.list\" :key=\"item.name\" v-show=\"sideBarStatus === 2\">\n            <img :src=\"item.icon | pickIcon\" style=\"width:16px;\"></img>\n            <span slot=\"title\">\n                <span style=\"padding-left:5px;\" v-if=\"global.register.lanuage == 'zh_CN'\">{{item.cnname}}</span>\n                <span style=\"padding-left:5px;\" v-else>{{item.enname}}</span>\n                <el-tooltip content=\"在新窗口中打开\" placement=\"right-start\">\n                    <el-button type=\"text\" icon=\"el-icon-position\" @click.stop.prevent=\"onClick(item.url)\" style=\"float:right;transform:scale(0.6);color:#ffffff;\"></el-button>\n                </el-tooltip>\n            </span>\n        </el-menu-item>\n\n        <!-- 没有分组的应用-->\n        <el-submenu :class=\"item.status\" :index=\"item.url\" v-for=\"item in model.appListUnGrouped\" :key=\"item.name\">\n            <template slot=\"title\">\n                <img :src=\"item.icon | pickIcon\" style=\"width:16px;\"></img>\n                <span style=\"padding-left:5px;\" v-if=\"global.register.lanuage == 'zh_CN'\">{{item.cnname}}</span>\n                <span style=\"padding-left:5px;\" v-else>{{item.enname}}</span>\n            </template>\n            <el-menu-item :index=\"item.url\">\n                <span style=\"padding-left:5px;\" v-if=\"global.register.lanuage == 'zh_CN'\">{{item.cnname}}</span>\n                <span style=\"padding-left:5px;\" v-else>{{item.enname}}</span>\n                <el-tooltip content=\"在新窗口中打开\" placement=\"right-start\">\n                    <el-button type=\"text\" icon=\"el-icon-position\" @click.stop.prevent=\"onClick(item.url)\" style=\"float:right;transform:scale(0.6);color:#ffffff;\"></el-button>\n                </el-tooltip>\n            </el-menu-item>\n        </el-submenu>\n\n    </el-menu>\n</template>\n\n<script>\nimport _ from 'lodash';\n\nexport default{\n    name: \"SideBar\",\n    props: {\n        auth: Object,\n        global: Object\n    },\n    data(){\n        return {\n            model: null,\n            preFixIcon: '/static/assets/images/apps/png/',\n            postFixIcon: '',\n            isCollapse: true,\n            defaultActive: '/matrix/home',\n            appConfig: [],\n            sideBarStatus: 2\n        }\n    },\n    created(){\n        this.init();\n    },\n    mounted(){\n        this.defaultActive = window.location.pathname;\n    },\n    filters:{\n        pickIcon(icon){\n            return `/static/assets/images/apps/png/${icon}`;\n        }\n    },\n    methods: {\n        init(){\n            this.m3.callFS(\"/matrix/m3search/user.js\", this.auth.username).then( (val)=>{\n                let rtn = val.message;\n                \n                this.model = {\n                    list: _.map(rtn.appListSelected,(v)=>{\n                            /* let _page = _.last(mx.getPage().split(\"/\"));\n\n                            if(_.endsWith(v.url,_page)){\n                                return _.merge(v, {status: \"active\"});\n                            } */\n\n                            return _.merge(v, {status: \"\"});\n                        }),\n                    template: rtn.template,\n                    appListUnGrouped: rtn.appListUnGrouped\n                };\n\n                this.setStatus();\n            } );\n            \n        },\n        setStatus(){\n            // 有模板情况\n            if(!_.isEmpty(this.model.template)){\n                this.sideBarStatus = 0;\n            } \n            // 没有模板情况\n            else{\n                // 菜单项超过阈值\n                if(this.model.list.length > this.global.register.sidebar.menuCollapse){\n                    this.sideBarStatus = 1;\n                }\n                // 菜单项没有超过阈值\n                else {\n                    this.sideBarStatus = 2;\n                }\n            }\n        },\n        initWnd(){\n\n            /* setTimeout(() => {\n                this.wnd = maxWindow.winApps(`应用市场`, `<div id=\"nav-menu-level1\" style=\"width:100%;height:100%;\"></div>`, null, 'apps-container');\n                inst.app = new Vue(inst.appBox()).$mount(\"#nav-menu-level1\");\n            }, 50); */\n\n        },\n        refresh(){\n            this.init();\n        },\n        onToggle(){\n            this.isCollapse = !this.isCollapse;\n        },\n        onSelect(index,indexPath){\n            if(index == 'toggle'){\n                this.onToggle();\n            } else if(index == 'apps'){\n                this.initWnd();\n            } else {\n                window.open(index,'_parent');\n            }\n        },\n        onClick(url){\n            window.open(url,'_blank')\n        },\n        onOpen(key, keyPath) {\n            console.log(key, keyPath);\n        },\n        onClose(key, keyPath) {\n            console.log(key, keyPath);\n        }\n    }\n}\n</script>\n\n<style scoped>\n    .dark .m3 > .sidebar{\n        width: 60px;\n    }\n\n    .el-menu-vertical-sidebar:not(.el-menu--collapse){\n        width: 200px;\n        height: 100vh;\n    }\n\n    .el-menu--collapse {\n        width: 64px;\n        height: calc(100vh - 50px);\n    }\n\n    .el-menu {\n        border-right: solid 1px #e6e6e6;\n        list-style: none;\n        position: relative;\n        margin: 0;\n        padding-left: 0;\n        background-color: #252d47;\n    }\n\n    .el-menu-item i {\n        color: #ffffff;\n    }\n    .el-menu--collapse>.el-menu-item.is-active i {\n        color: #ffffff;\n    }\n</style>\n\n<style>\n    .el-menu:not(.el-menu--popup-bottom-start), \n    .el-menu--horizontal>.el-menu-item:not(.is-disabled):focus, \n    .el-menu--horizontal>.el-menu-item:not(.is-disabled):hover, \n    .el-menu--horizontal>.el-submenu .el-submenu__title:hover {\n        background-color: #252d47!important;\n    }\n    .el-submenu__title:hover{\n        background-color: #409dfe!important;\n    }\n    .el-submenu:hover {\n        background-color: #409dfe!important;\n    }\n</style>\n"]}]}