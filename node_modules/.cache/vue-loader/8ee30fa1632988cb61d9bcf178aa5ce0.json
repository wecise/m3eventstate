{"remainingRequest":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/graph/ActionView.vue?vue&type=style&index=0&id=d08ef0e8&scoped=true&lang=css&","dependencies":[{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/src/components/graph/ActionView.vue","mtime":1629557808457},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cnwangzd/Documents/cnwangzd/wecise/m3/apps/m3search/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWNvbnRhaW5lcnsKICAgIGhlaWdodDogNzB2aDsKfQo="},{"version":3,"sources":["ActionView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA","file":"ActionView.vue","sourceRoot":"src/components/graph","sourcesContent":["<template>\n    <el-container>\n        <el-header style=\"height:40px;line-height:40px;padding:0px 10px;\">\n            <el-input v-model=\"filterText\" \n                placeholder=\"搜索\" size=\"mini\"\n                clearable></el-input>\n        </el-header>\n        <el-main style=\"padding:0px 10px; height: 100%;\">\n            <el-tree :data=\"treeData\" \n                    :props=\"defaultProps\" \n                    node-key=\"id\"\n                    highlight-current\n                    default-expand-all\n                    auto-expand-parent\n                    @node-click=\"onNodeClick\"\n                    :filter-node-method=\"onFilterNode\"\n                    style=\"background:transparent;\"\n                    ref=\"tree\">\n                <span slot-scope=\"{ node, data }\" style=\"width:100%;\">\n                    <span v-if=\"data\">\n                        <i class=\"el-icon-c-scale-to-original\" style=\"color:#0088cc;\"></i> {{ node.label }}\n                    </span>\n                    <span v-else>\n                        <i class=\"el-icon-folder\" style=\"color:#ffa500;\"></i> {{ node.label }}\n                    </span>\n                </span>\n            </el-tree>\n        </el-main>\n    </el-container>\n</template>\n\n<script>\nimport _ from 'lodash';\n\nexport default {\n    name:'ActionView',\n    props: {\n        root: String\n    },\n    data(){\n        return {\n            treeData: [],\n            defaultProps: {\n                children: 'children',\n                label: 'alias'\n            },\n            filterText: \"\"\n        }\n    },\n    watch: {\n        filterText(val) {\n            if(_.isEmpty(val)){\n                this.initData();\n            } else {\n                this.$refs.tree.filter(val);\n            }\n        }\n    },\n    created(){\n        this.initData();\n    },\n    methods: {\n        initData(){\n            this.m3.callFS(\"/matrix/m3graph/entity_class.js\",encodeURIComponent(this.root)).then( (rtn)=>{\n                this.treeData = rtn.message;\n                this.$emit(\"treedata-loaded\",this.treeData);\n            } );\n        },\n        onFilterNode:_.debounce((value)=>{\n            \n            if (!value) return true;\n            \n            try{\n                this.m3.callFS(\"/matrix/m3graph/entity-search-by-term.js\",encodeURIComponent(value)).then( (val)=>{\n                    let rtn = val.message\n                    this.treeData = _.map(rtn,(v)=>{\n                        return _.extend(v,{ children:[], alias:_.last(v.class.split(\"/\"))});\n                    });\n                } );\n            } catch(err){\n                this.treeData = [];\n            }\n        },1000),\n        onNodeClick(data){\n            this.$emit('node-click',data);\n        }\n    }\n}\n</script>\n<style scoped>\n    .el-container{\n        height: 70vh;\n    }\n</style>"]}]}